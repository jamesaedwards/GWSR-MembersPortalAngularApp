{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\james\\\\source\\\\repos\\\\GWRTMemberAngularApp\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../shared/tarrif.service\";\nimport * as i2 from \"../join.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"../../shared/tarrifs-list/tarrifs-list.component\";\nimport * as i6 from \"../persondetails-form/persondetails-form.component\";\nimport * as i7 from \"../../shared/address-form/address-form.component\";\nimport * as i8 from \"../../shared/payment-methods-table/payment-methods-table.component\";\nimport * as i9 from \"../../shared/membership-declarations/membership-declarations.component\";\nimport * as i10 from \"../../shared/please-waitpopup/please-waitpopup.component\";\n\nconst _c0 = function () {\n  return [\"/contact\"];\n};\n\nfunction JoinHomeComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"h4\", 7);\n    i0.ɵɵtext(2, \"Existing Member?\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4, \"The email address you have entered appears to already be in our database and may be attached to an existing membership. If you are not sure, please contact the \");\n    i0.ɵɵelementStart(5, \"a\", 8);\n    i0.ɵɵtext(6, \"membership secretary\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \" before proceeding. \");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(1, _c0));\n  }\n}\n\nfunction JoinHomeComponent_app_tarrifs_list_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-tarrifs-list\", 9);\n    i0.ɵɵlistener(\"onTarrifSelect\", function JoinHomeComponent_app_tarrifs_list_2_Template_app_tarrifs_list_onTarrifSelect_0_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.SetTarrif($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction JoinHomeComponent_section_3_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"app-persondetails-form\", 14);\n    i0.ɵɵlistener(\"onFormCompleted\", function JoinHomeComponent_section_3_div_10_Template_app_persondetails_form_onFormCompleted_1_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext(2);\n      return ctx_r13.setPersonalDetails($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"p\");\n    i0.ɵɵtext(3, \" If this is a gift membership for someone else, please e-mail membership.secretary@gwsr.com with a contact telephone number and full details of the occasion, urgency, etc. after you have completed the sign-up. \");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formData\", ctx_r10.personBasicDetails);\n  }\n}\n\nfunction JoinHomeComponent_section_3_div_11_div_8_li_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵelement(1, \"i\", 19);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ad_r19 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate3(\" \", ad_r19.title, \" \", ad_r19.firstName, \" \", ad_r19.lastName, \" \");\n  }\n}\n\nfunction JoinHomeComponent_section_3_div_11_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ul\");\n    i0.ɵɵtemplate(4, JoinHomeComponent_section_3_div_11_div_8_li_4_Template, 3, 3, \"li\", 18);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r15 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"Added \", ctx_r15.additionalSeatHolders.length, \" out of \", ctx_r15.getTarrifSeats() - 1, \" available\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r15.additionalSeatHolders);\n  }\n}\n\nfunction JoinHomeComponent_section_3_div_11_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"app-persondetails-form\", 21);\n    i0.ɵɵlistener(\"onFormCompleted\", function JoinHomeComponent_section_3_div_11_div_9_Template_app_persondetails_form_onFormCompleted_1_listener($event) {\n      i0.ɵɵrestoreView(_r21);\n      const ctx_r20 = i0.ɵɵnextContext(3);\n      return ctx_r20.addAdditionalSeat($event);\n    });\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction JoinHomeComponent_section_3_div_11_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22)(1, \"p\");\n    i0.ɵɵtext(2, \"Thank you. You have added the maximum number of joint holders. \");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction JoinHomeComponent_section_3_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"h2\", 11);\n    i0.ɵɵtext(2, \"Membership joint-holders\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"hr\");\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\");\n    i0.ɵɵtext(7, \"If your joint holder doesn't have their own email address, please re-enter your email address. \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(8, JoinHomeComponent_section_3_div_11_div_8_Template, 5, 3, \"div\", 4);\n    i0.ɵɵtemplate(9, JoinHomeComponent_section_3_div_11_div_9_Template, 2, 0, \"div\", 15);\n    i0.ɵɵtemplate(10, JoinHomeComponent_section_3_div_11_div_10_Template, 3, 0, \"div\", 16);\n    i0.ɵɵelementStart(11, \"p\");\n    i0.ɵɵtext(12, \"When you have finished adding joint holders, click next.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function JoinHomeComponent_section_3_div_11_Template_button_click_13_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext(2);\n      return ctx_r22.step = ctx_r22.step + 1;\n    });\n    i0.ɵɵtext(14, \"Next\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" You can add an additional \", ctx_r11.getTarrifSeats() - 1, \" number of people your selected membership type. Please tell us about the other individuals you want to attach to this membership. Generally speaking, the trust will not contact joint-holders unless we cannot get in touch with you. \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r11.additionalSeatHolders.length > 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r11.additionalSeatHolders.length < ctx_r11.getTarrifSeats() - 1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r11.additionalSeatHolders.length >= ctx_r11.selectedTarrifSeats - 1);\n  }\n}\n\nfunction JoinHomeComponent_section_3_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 23)(1, \"app-address-form\", 24);\n    i0.ɵɵlistener(\"onFormComplete\", function JoinHomeComponent_section_3_div_12_Template_app_address_form_onFormComplete_1_listener($event) {\n      i0.ɵɵrestoreView(_r25);\n      const ctx_r24 = i0.ɵɵnextContext(2);\n      return ctx_r24.setAddress($event);\n    });\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"setAddress\", ctx_r12.address);\n  }\n}\n\nfunction JoinHomeComponent_section_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"section\", 10)(1, \"h1\", 11);\n    i0.ɵɵtext(2, \"Your Details\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"hr\");\n    i0.ɵɵelementStart(4, \"p\")(5, \"strong\");\n    i0.ɵɵtext(6, \"Selected Membership:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7);\n    i0.ɵɵelementStart(8, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function JoinHomeComponent_section_3_Template_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r26 = i0.ɵɵnextContext();\n      return ctx_r26.resetTarrif();\n    });\n    i0.ɵɵtext(9, \" Change \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(10, JoinHomeComponent_section_3_div_10_Template, 4, 1, \"div\", 4);\n    i0.ɵɵtemplate(11, JoinHomeComponent_section_3_div_11_Template, 15, 4, \"div\", 4);\n    i0.ɵɵtemplate(12, JoinHomeComponent_section_3_div_12_Template, 2, 1, \"div\", 13);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.getSelectedTarrifDescription(), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.step === 2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.step === 3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.step === 4);\n  }\n}\n\nfunction JoinHomeComponent_section_4_div_24_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\")(2, \"strong\");\n    i0.ɵɵtext(3, \"Name: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4);\n    i0.ɵɵelement(5, \"br\");\n    i0.ɵɵelementStart(6, \"strong\");\n    i0.ɵɵtext(7, \"Email: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8);\n    i0.ɵɵelement(9, \"br\");\n    i0.ɵɵelementStart(10, \"strong\");\n    i0.ɵɵtext(11, \"Phone Number: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12);\n    i0.ɵɵelement(13, \"br\");\n    i0.ɵɵelementStart(14, \"strong\");\n    i0.ɵɵtext(15, \"Mobile Number: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ah_r30 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate4(\"\", ah_r30.title, \". \", ah_r30.firstName, \" \", ah_r30.middleName, \" \", ah_r30.lastName, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ah_r30.email);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ah_r30.landLineNo);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\", ah_r30.mobileNumber, \" \");\n  }\n}\n\nfunction JoinHomeComponent_section_4_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h2\", 7);\n    i0.ɵɵtext(2, \"Additonal Holders\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, JoinHomeComponent_section_4_div_24_div_3_Template, 17, 7, \"div\", 18);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r28 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r28.additionalSeatHolders);\n  }\n}\n\nfunction JoinHomeComponent_section_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r32 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"section\", 10)(1, \"p\")(2, \"strong\");\n    i0.ɵɵtext(3, \"Please take a moment to double check the details entered. \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 25)(5, \"div\", 26)(6, \"h2\", 7);\n    i0.ɵɵtext(7, \"Personal Details\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"p\")(9, \"strong\");\n    i0.ɵɵtext(10, \"Name: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11);\n    i0.ɵɵelement(12, \"br\");\n    i0.ɵɵelementStart(13, \"strong\");\n    i0.ɵɵtext(14, \"Email: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(15);\n    i0.ɵɵelement(16, \"br\");\n    i0.ɵɵelementStart(17, \"strong\");\n    i0.ɵɵtext(18, \"Phone Number: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(19);\n    i0.ɵɵelement(20, \"br\");\n    i0.ɵɵelementStart(21, \"strong\");\n    i0.ɵɵtext(22, \"Mobile Number: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(23);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(24, JoinHomeComponent_section_4_div_24_Template, 4, 1, \"div\", 4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"div\", 26)(26, \"h2\", 7);\n    i0.ɵɵtext(27, \"Address\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"p\")(29, \"strong\");\n    i0.ɵɵtext(30, \"Line 1: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(31);\n    i0.ɵɵelement(32, \"br\");\n    i0.ɵɵelementStart(33, \"strong\");\n    i0.ɵɵtext(34, \"Line 2: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(35);\n    i0.ɵɵelement(36, \"br\");\n    i0.ɵɵelementStart(37, \"strong\");\n    i0.ɵɵtext(38, \"Line 3: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(39);\n    i0.ɵɵelement(40, \"br\");\n    i0.ɵɵelementStart(41, \"strong\");\n    i0.ɵɵtext(42, \"Town/City: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(43);\n    i0.ɵɵelement(44, \"br\");\n    i0.ɵɵelementStart(45, \"strong\");\n    i0.ɵɵtext(46, \"County: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(47);\n    i0.ɵɵelement(48, \"br\");\n    i0.ɵɵelementStart(49, \"strong\");\n    i0.ɵɵtext(50, \"Postcode: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(51);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(52, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function JoinHomeComponent_section_4_Template_button_click_52_listener() {\n      i0.ɵɵrestoreView(_r32);\n      const ctx_r31 = i0.ɵɵnextContext();\n      return ctx_r31.step = 2;\n    });\n    i0.ɵɵtext(53, \"No, somethings wrong\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(54, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function JoinHomeComponent_section_4_Template_button_click_54_listener() {\n      i0.ɵɵrestoreView(_r32);\n      const ctx_r33 = i0.ɵɵnextContext();\n      return ctx_r33.step = 6;\n    });\n    i0.ɵɵtext(55, \"Yes, thats correct\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(11);\n    i0.ɵɵtextInterpolate4(\"\", ctx_r3.personBasicDetails.title, \". \", ctx_r3.personBasicDetails.firstName, \" \", ctx_r3.personBasicDetails.middleName, \" \", ctx_r3.personBasicDetails.lastName, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r3.personBasicDetails.email);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r3.personBasicDetails.landLineNo);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r3.personBasicDetails.mobileNumber, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.additionalSeatHolders.length > 0);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(ctx_r3.address.addressLine1);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r3.address.addressLine2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r3.address.addressLine3);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r3.address.town);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r3.address.county);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r3.address.postCode, \" \");\n  }\n}\n\nfunction JoinHomeComponent_section_5_app_payment_methods_table_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r38 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-payment-methods-table\", 31);\n    i0.ɵɵlistener(\"onload\", function JoinHomeComponent_section_5_app_payment_methods_table_1_Template_app_payment_methods_table_onload_0_listener() {\n      i0.ɵɵrestoreView(_r38);\n      const ctx_r37 = i0.ɵɵnextContext(2);\n      return ctx_r37.toTop();\n    })(\"onMethodSelected\", function JoinHomeComponent_section_5_app_payment_methods_table_1_Template_app_payment_methods_table_onMethodSelected_0_listener($event) {\n      i0.ɵɵrestoreView(_r38);\n      const ctx_r39 = i0.ɵɵnextContext(2);\n      return ctx_r39.selectedPaymentMethod = $event;\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction JoinHomeComponent_section_5_app_membership_declarations_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r41 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-membership-declarations\", 32);\n    i0.ɵɵlistener(\"onload\", function JoinHomeComponent_section_5_app_membership_declarations_2_Template_app_membership_declarations_onload_0_listener() {\n      i0.ɵɵrestoreView(_r41);\n      const ctx_r40 = i0.ɵɵnextContext(2);\n      return ctx_r40.toTop();\n    })(\"declarationsChange\", function JoinHomeComponent_section_5_app_membership_declarations_2_Template_app_membership_declarations_declarationsChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r41);\n      const ctx_r42 = i0.ɵɵnextContext(2);\n      return ctx_r42.declarations = $event;\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r35 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"declarations\", ctx_r35.declarations)(\"selectedTarrifBaseRate\", ctx_r35.selectedTarrifBaseRate);\n  }\n}\n\nfunction JoinHomeComponent_section_5_button_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r44 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 33);\n    i0.ɵɵlistener(\"click\", function JoinHomeComponent_section_5_button_3_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r44);\n      const ctx_r43 = i0.ɵɵnextContext(2);\n      return ctx_r43.createMembership();\n    });\n    i0.ɵɵtext(1, \" Pay Now \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r36 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"disabled\", !ctx_r36.declarations.termsAccepted);\n  }\n}\n\nfunction JoinHomeComponent_section_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"section\", 10);\n    i0.ɵɵtemplate(1, JoinHomeComponent_section_5_app_payment_methods_table_1_Template, 1, 0, \"app-payment-methods-table\", 28);\n    i0.ɵɵtemplate(2, JoinHomeComponent_section_5_app_membership_declarations_2_Template, 1, 2, \"app-membership-declarations\", 29);\n    i0.ɵɵtemplate(3, JoinHomeComponent_section_5_button_3_Template, 2, 1, \"button\", 30);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.selectedPaymentMethod === 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.selectedPaymentMethod !== 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.selectedPaymentMethod !== 0);\n  }\n}\n\nfunction JoinHomeComponent_section_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"section\")(1, \"div\", 34)(2, \"p\", 7);\n    i0.ɵɵtext(3, \"Success\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5, \"Your membership has been created. We'll be in touch shortly to confirm your membership. \");\n    i0.ɵɵelementEnd()()();\n  }\n}\n\nfunction JoinHomeComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 35)(1, \"p\", 7);\n    i0.ɵɵtext(2, \"Couldn't Sign You Up. \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r6.error);\n  }\n}\n\nfunction JoinHomeComponent_app_please_waitpopup_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-please-waitpopup\");\n  }\n}\n\nexport let JoinHomeComponent = /*#__PURE__*/(() => {\n  class JoinHomeComponent {\n    constructor(tarrifsService, joinService) {\n      this.tarrifsService = tarrifsService;\n      this.joinService = joinService;\n      this.step = 1;\n      this.selectedCategory = 0;\n      this.selectedTarrif = 0;\n      this.selectedTarrifDescription = \"\";\n      this.selectedPaymentMethod = 0; //4 = Direct Debit, 5 = Credit Card.\n\n      this.declarations = {\n        termsAccepted: true,\n        additonalDonation: 0,\n        additonalDonationRepeatOnRenewal: false,\n        giftAidDecl: '',\n        cornishman: 0\n      };\n      this.showExistingEmailWarining = false;\n      this.error = \"\";\n      this.additionalSeatHolders = [];\n      this.loading = true;\n      this.tarrifs = [];\n    }\n\n    getSelectedTarrifDescription() {\n      return this.tarrifsService.selectedCategory.name + \" - \" + this.tarrifsService.selectedTarrif.description;\n    }\n\n    ngOnInit() {\n      this.tarrifsService.getTarrifs().subscribe({\n        next: r => {\n          this.tarrifs = r;\n          this.loading = false;\n\n          error: () => this.loading = false;\n        }\n      });\n    }\n\n    SetTarrif(selectedTarrif) {\n      // this.selectedTarrif =selectedTarrif.tarrif;\n      // let thisCategory = this.tarrifs.find(i=>i.id == selectedTarrif.category);\n      // this.selectedTarrifDescription = thisCategory?.name + \" - \" + thisCategory?.tarrifs.find(r=>r.id == selectedTarrif.tarrif)?.description;\n      // this.selectedTarrifBaseRate = thisCategory?.tarrifs.find(r=>r.id == selectedTarrif.tarrif)?.rate!;\n      this.step = 2;\n      this.toTop();\n    }\n\n    addAdditionalSeat(additionalPerson) {\n      this.additionalSeatHolders.push(additionalPerson);\n    }\n\n    resetTarrif() {\n      this.selectedTarrifDescription = \"\";\n      this.selectedTarrif = 0;\n      this.step = 1;\n      this.toTop();\n    }\n\n    getTarrifSeats() {\n      return this.tarrifsService.getSelectedTarrifSeats();\n    }\n\n    setPersonalDetails(person) {\n      this.toTop();\n      this.personBasicDetails = person;\n      this.joinService.checkEmail(this.personBasicDetails.email).subscribe(r => {\n        this.showExistingEmailWarining = r;\n      });\n\n      if (this.getTarrifSeats() > 1) {\n        this.step = 3;\n        return;\n      }\n\n      this.step = 4;\n    }\n\n    setAddress(ad) {\n      this.address = ad;\n      this.address.id = '00000000-0000-0000-0000-000000000000';\n      this.step = 5;\n      this.toTop();\n    }\n    /*\r\n    async  registerMember(){\r\n       this.loading = true;\r\n        await this.createPerson().then(async () => {\r\n         await this.createAddress().then(async () => {\r\n          await this.createMembership();\r\n         }).catch((e) => {\r\n            alert(e);\r\n         }).catch((e) => {\r\n          alert(e);\r\n         });\r\n        }).catch((e) => {\r\n          alert(e);\r\n        });\r\n    \r\n      }\r\n    async createPerson(){\r\n      this.joinService.createPerson(this.personBasicDetails).subscribe(r => {\r\n        this.personGuid = r;\r\n        this.address.id = r;\r\n        return r;\r\n      }).unsubscribe();\r\n    }\r\n    async createAddress(){\r\n      setTimeout(() => {\r\n        this.joinService.createAddress(this.address).subscribe(r=> {\r\n          return;\r\n        }).unsubscribe();\r\n       }, 500);\r\n    \r\n    } */\n\n\n    createMembership() {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        _this.loading = true;\n        let requestDTO = {\n          membership: {\n            selectedPaymentMethod: _this.selectedPaymentMethod,\n            personId: _this.personGuid,\n            additionalDonation: _this.declarations.additonalDonation,\n            repeatDonationOnRenewal: _this.declarations.additonalDonationRepeatOnRenewal,\n            jointHolders: _this.additionalSeatHolders,\n            membershipTarrifId: _this.tarrifsService.selectedTarrif.id,\n            giftAidDeclaration: _this.declarations.giftAidDecl === 'true' ? true : false,\n            cornishman: _this.cornishman\n          },\n          person: _this.personBasicDetails,\n          address: _this.address\n        };\n\n        _this.joinService.createMembership(requestDTO).subscribe({\n          next: r => {\n            _this.loading = false;\n            _this.step = 7;\n            window.location.href = r.paymentUrl;\n            return;\n          },\n          error: e => {\n            let message = e.error.message;\n            _this.error = message + \" Please contact the membership secretary.\";\n            alert(\"We are sorry, but we couldn't create your membership at this time. \" + message + \" Please try again later or contact the membership secretary.\");\n            _this.loading = false;\n          }\n        });\n      })();\n    }\n\n    toTop() {\n      window.scroll(0, 0);\n    }\n\n  }\n\n  JoinHomeComponent.ɵfac = function JoinHomeComponent_Factory(t) {\n    return new (t || JoinHomeComponent)(i0.ɵɵdirectiveInject(i1.TarrifService), i0.ɵɵdirectiveInject(i2.JoinService));\n  };\n\n  JoinHomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: JoinHomeComponent,\n    selectors: [[\"app-join-home\"]],\n    decls: 9,\n    vars: 8,\n    consts: [[1, \"mb-big\"], [\"class\", \"notification notification--warning\", 4, \"ngIf\"], [3, \"onTarrifSelect\", 4, \"ngIf\"], [\"class\", \"p-big\", 4, \"ngIf\"], [4, \"ngIf\"], [\"class\", \"notification notification--error\", 4, \"ngIf\"], [1, \"notification\", \"notification--warning\"], [1, \"text-big\"], [1, \"text-white\", 3, \"routerLink\"], [3, \"onTarrifSelect\"], [1, \"p-big\"], [1, \"text-huge\"], [1, \"button\", \"button--small\", 3, \"click\"], [\"class\", \"p-medium\", 4, \"ngIf\"], [3, \"formData\", \"onFormCompleted\"], [\"class\", \"border-top border-bottom p-medium\", 4, \"ngIf\"], [\"class\", \"border-top border-bottom\", 4, \"ngIf\"], [1, \"button\", 3, \"click\"], [4, \"ngFor\", \"ngForOf\"], [1, \"fa-solid\", \"fa-check\"], [1, \"border-top\", \"border-bottom\", \"p-medium\"], [3, \"onFormCompleted\"], [1, \"border-top\", \"border-bottom\"], [1, \"p-medium\"], [3, \"setAddress\", \"onFormComplete\"], [1, \"row\"], [1, \"col\", \"col-md-6\"], [1, \"button\", \"button--red\", \"button-small\", 3, \"click\"], [3, \"onload\", \"onMethodSelected\", 4, \"ngIf\"], [3, \"declarations\", \"selectedTarrifBaseRate\", \"onload\", \"declarationsChange\", 4, \"ngIf\"], [\"class\", \"button button-large\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [3, \"onload\", \"onMethodSelected\"], [3, \"declarations\", \"selectedTarrifBaseRate\", \"onload\", \"declarationsChange\"], [1, \"button\", \"button-large\", 3, \"disabled\", \"click\"], [1, \"notification\", \"notification--success\"], [1, \"notification\", \"notification--error\"]],\n    template: function JoinHomeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"section\", 0);\n        i0.ɵɵtemplate(1, JoinHomeComponent_div_1_Template, 8, 2, \"div\", 1);\n        i0.ɵɵtemplate(2, JoinHomeComponent_app_tarrifs_list_2_Template, 1, 0, \"app-tarrifs-list\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(3, JoinHomeComponent_section_3_Template, 13, 4, \"section\", 3);\n        i0.ɵɵtemplate(4, JoinHomeComponent_section_4_Template, 56, 14, \"section\", 3);\n        i0.ɵɵtemplate(5, JoinHomeComponent_section_5_Template, 4, 3, \"section\", 3);\n        i0.ɵɵtemplate(6, JoinHomeComponent_section_6_Template, 6, 0, \"section\", 4);\n        i0.ɵɵtemplate(7, JoinHomeComponent_div_7_Template, 5, 1, \"div\", 5);\n        i0.ɵɵtemplate(8, JoinHomeComponent_app_please_waitpopup_8_Template, 1, 0, \"app-please-waitpopup\", 4);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showExistingEmailWarining);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.step === 1);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.step >= 2);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.step === 5);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.step === 6);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.step === 7);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.error !== \"\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.loading);\n      }\n    },\n    directives: [i3.NgIf, i4.RouterLinkWithHref, i5.TarrifsListComponent, i6.PersondetailsFormComponent, i3.NgForOf, i7.AddressFormComponent, i8.PaymentMethodsTableComponent, i9.MembershipDeclarationsComponent, i10.PleaseWaitpopupComponent],\n    styles: [\"\"]\n  });\n  return JoinHomeComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}