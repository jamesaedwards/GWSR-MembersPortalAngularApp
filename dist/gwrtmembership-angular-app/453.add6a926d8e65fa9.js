"use strict";(self.webpackChunkGWRTMembershipAngularApp=self.webpackChunkGWRTMembershipAngularApp||[]).push([[453],{8453:(me,f,p)=>{p.r(f),p.d(f,{JoinModule:()=>pe});var c=p(9808);function g(o,i,t,n,s,d,a){try{var u=o[d](a),l=u.value}catch(m){return void t(m)}u.done?i(l):Promise.resolve(l).then(n,s)}var e=p(1223),b=p(6579),h=p(4720),v=p(520);let A=(()=>{class o{constructor(t){this.http=t,this.baseUrl=h.D.baseApiUrl}createPerson(t){return this.http.post(this.baseUrl+"Person",t)}createAddress(t){return this.http.post(this.baseUrl+"Person/AddAddress",t)}createMembership(t){return this.http.post(this.baseUrl+"Membership",t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(v.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var x=p(9285),r=p(2382);function F(o,i){1&o&&(e.TgZ(0,"p",31),e._uU(1,"Please enter a title"),e.qZA())}function N(o,i){1&o&&(e.TgZ(0,"p",31),e._uU(1,"Your first name is required"),e.qZA())}function C(o,i){1&o&&(e.TgZ(0,"p",31),e._uU(1,"Your first name is required"),e.qZA())}function U(o,i){1&o&&(e.TgZ(0,"p",31),e._uU(1,"Your last name is required"),e.qZA())}function y(o,i){1&o&&(e.TgZ(0,"p",31),e._uU(1,"A valid email address is required"),e.qZA())}let q=(()=>{class o{constructor(){this.signupForm=new r.cw({title:new r.NI(""),firstName:new r.NI("",r.kI.required),middleName:new r.NI(""),lastName:new r.NI("",r.kI.required),email:new r.NI("",[r.kI.email,r.kI.required]),phoneNumber:new r.NI(""),mobileNumber:new r.NI(""),ageCategory:new r.NI(0,[r.kI.required])}),this.onFormCompleted=new e.vpe}ngOnInit(){var t,n,s,d,a,u,l;console.log("person form fired"),this.formData&&(console.log("person form data in."),null===(t=this.signupForm.get("title"))||void 0===t||t.setValue(this.formData.title),null===(n=this.signupForm.get("firstName"))||void 0===n||n.setValue(this.formData.firstName),null===(s=this.signupForm.get("middleName"))||void 0===s||s.setValue(this.formData.middleName),null===(d=this.signupForm.get("lastName"))||void 0===d||d.setValue(this.formData.lastName),null===(a=this.signupForm.get("email"))||void 0===a||a.setValue(this.formData.email),null===(u=this.signupForm.get("phoneNumber"))||void 0===u||u.setValue(this.formData.landLineNo),null===(l=this.signupForm.get("mobileNumber"))||void 0===l||l.setValue(this.formData.mobileNumber))}onSubmit(){var t,n,s,d,a,u,l,m;if(this.signupForm.valid){let _={title:null===(t=this.signupForm.get("title"))||void 0===t?void 0:t.value,firstName:null===(n=this.signupForm.get("firstName"))||void 0===n?void 0:n.value,middleName:null===(s=this.signupForm.get("middleName"))||void 0===s?void 0:s.value,lastName:null===(d=this.signupForm.get("lastName"))||void 0===d?void 0:d.value,email:null===(a=this.signupForm.get("email"))||void 0===a?void 0:a.value,landLineNo:null===(u=this.signupForm.get("phoneNumber"))||void 0===u?void 0:u.value,mobileNumber:null===(l=this.signupForm.get("mobileNumber"))||void 0===l?void 0:l.value,ageCategory:null===(m=this.signupForm.get("ageCategory"))||void 0===m?void 0:m.value};this.onFormCompleted.emit(_),this.signupForm.reset()}else alert("Please check the details you have entered")}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-persondetails-form"]],inputs:{formData:"formData"},outputs:{onFormCompleted:"onFormCompleted"},decls:68,vars:11,consts:[[3,"formGroup","ngSubmit"],[1,"text-small"],[1,"row"],[1,"col-12","col-md-2"],["for","title"],[3,"className"],["id","title","type","text","formControlName","title","list","titles"],["class","text-error text-small",4,"ngIf"],[1,"col-12","col-md-3"],["for","first-name"],["id","first-name","type","text","formControlName","firstName"],["for","middle-name"],[1,"input","input-fullWidth"],["id","middle-name","type","text","formControlName","middleName"],[1,"col-12","col-md-4"],["for","last-name"],["id","last-name","type","text","formControlName","lastName"],[1,"col-12","col-12"],["for","email"],["id","email","type","text","formControlName","email"],["for","mobileNumber"],["id","mobileNumber","type","text","formControlName","mobileNumber"],["for","phoneNumber"],["id","phoneNumber","type","text","formControlName","phoneNumber"],[1,"select","select-fullWidth"],["formControlName","ageCategory","id","ageCategory"],["value","0"],["value","1"],["value","2"],["type","submit",1,"button",3,"disabled"],["id","titles"],[1,"text-error","text-small"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(1,"p",1),e._uU(2,"*Mandatory fields"),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"label",4),e._uU(6,"Title: "),e.qZA(),e.TgZ(7,"div",5),e._UZ(8,"input",6),e.qZA(),e.YNc(9,F,2,0,"p",7),e.qZA(),e.TgZ(10,"div",8)(11,"label",9),e._uU(12,"First Name*: "),e.qZA(),e.TgZ(13,"div",5),e._UZ(14,"input",10),e.qZA(),e.YNc(15,N,2,0,"p",7),e.qZA(),e.TgZ(16,"div",8)(17,"label",11),e._uU(18,"Middle Name: "),e.qZA(),e.TgZ(19,"div",12),e._UZ(20,"input",13),e.qZA(),e.YNc(21,C,2,0,"p",7),e.qZA(),e.TgZ(22,"div",14)(23,"label",15),e._uU(24,"Last Name*: "),e.qZA(),e.TgZ(25,"div",5),e._UZ(26,"input",16),e.qZA(),e.YNc(27,U,2,0,"p",7),e.qZA(),e.TgZ(28,"div",17)(29,"label",18),e._uU(30,"Email*: "),e.TgZ(31,"span",1),e._uU(32,"(For children, please enter an email address belonging to their parent or guardian)"),e.qZA()(),e.TgZ(33,"div",5),e._UZ(34,"input",19),e.qZA(),e.YNc(35,y,2,0,"p",7),e.qZA(),e.TgZ(36,"div",14)(37,"label",20),e._uU(38,"Mobile Phone Number: "),e.qZA(),e.TgZ(39,"div",12),e._UZ(40,"input",21),e.qZA()(),e.TgZ(41,"div",14)(42,"label",22),e._uU(43,"Alternative Phone Number: "),e.qZA(),e.TgZ(44,"div",12),e._UZ(45,"input",23),e.qZA()(),e.TgZ(46,"div",14)(47,"label",20),e._uU(48,"Please select your category: "),e.qZA(),e.TgZ(49,"div",24)(50,"select",25)(51,"option",26),e._uU(52,"Adult"),e.qZA(),e.TgZ(53,"option",27),e._uU(54,"Senior (60+)"),e.qZA(),e.TgZ(55,"option",28),e._uU(56,"Child/Student"),e.qZA()()()()(),e.TgZ(57,"button",29),e._uU(58,"Save"),e.qZA()(),e.TgZ(59,"datalist",30)(60,"option"),e._uU(61,"Mr"),e.qZA(),e.TgZ(62,"option"),e._uU(63,"Mrs"),e.qZA(),e.TgZ(64,"option"),e._uU(65,"Miss"),e.qZA(),e.TgZ(66,"option"),e._uU(67,"Ms"),e.qZA()()),2&t&&(e.Q6J("formGroup",n.signupForm),e.xp6(7),e.Q6J("className",n.signupForm.controls.title.invalid&&n.signupForm.controls.title.touched?"has-error input input-fullWidth":"input input-fullWidth"),e.xp6(2),e.Q6J("ngIf",n.signupForm.controls.title.invalid&&n.signupForm.controls.title.touched),e.xp6(4),e.Q6J("className",n.signupForm.controls.firstName.invalid&&n.signupForm.controls.firstName.touched?"has-error input input-fullWidth":"input input-fullWidth"),e.xp6(2),e.Q6J("ngIf",n.signupForm.controls.firstName.invalid&&n.signupForm.controls.firstName.touched),e.xp6(6),e.Q6J("ngIf",n.signupForm.controls.middleName.invalid&&n.signupForm.controls.middleName.touched),e.xp6(4),e.Q6J("className",n.signupForm.controls.lastName.invalid&&n.signupForm.controls.lastName.touched?"has-error input input-fullWidth":"input input-fullWidth"),e.xp6(2),e.Q6J("ngIf",n.signupForm.controls.lastName.invalid&&n.signupForm.controls.lastName.touched),e.xp6(6),e.Q6J("className",n.signupForm.controls.email.invalid&&n.signupForm.controls.email.touched?"has-error input input-fullWidth":"input input-fullWidth"),e.xp6(2),e.Q6J("ngIf",n.signupForm.controls.email.invalid&&n.signupForm.controls.email.touched),e.xp6(22),e.Q6J("disabled",!1===n.signupForm.valid))},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,c.O5,r.EJ,r.YN,r.Kr],styles:[""]}),o})(),J=(()=>{class o{constructor(t){this.http=t,this.baseUrl=h.D.baseApiUrl}lookup(t){return this.http.get(this.baseUrl+"address/lookup/"+t)}getAddress(t){return this.http.get(this.baseUrl+"address/"+t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(v.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function w(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"li")(1,"button",7),e.NdJ("click",function(){const d=e.CHM(t).$implicit;return e.oxw(3).handleLookupSelect(d.id)}),e._uU(2,"Select"),e.qZA(),e._uU(3),e.qZA()}if(2&o){const t=i.$implicit;e.xp6(3),e.hij(" ",t.address," ")}}function S(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"p"),e._uU(2,"If you see your address from the suggestions below, please click 'Select' next to it. "),e.qZA(),e.TgZ(3,"ul"),e.YNc(4,w,4,1,"li",9),e.qZA(),e.TgZ(5,"button",10),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).step=2}),e._uU(6,"My Address Isn't There"),e.qZA()()}if(2&o){const t=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",t.lookupSuggestions)}}function I(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",3)(1,"label",4),e._uU(2,"Please start typing your address in the box below, suggestions will appear below."),e.qZA(),e.TgZ(3,"div",5)(4,"input",6),e.NdJ("ngModelChange",function(s){return e.CHM(t),e.oxw().lookupSearch=s})("keyup",function(){return e.CHM(t),e.oxw().handleAddressLookup()}),e.qZA()(),e.TgZ(5,"button",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().step=2}),e._uU(6,"enter manually"),e.qZA(),e.YNc(7,S,7,1,"div",8),e.qZA()}if(2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.lookupSearch),e.xp6(3),e.Q6J("ngIf",null!==t.lookupSuggestions&&t.lookupSuggestions.length>0)}}function H(o,i){1&o&&(e.TgZ(0,"p",33),e._uU(1,"First Line of your address is required"),e.qZA())}function L(o,i){1&o&&(e.TgZ(0,"p",33),e._uU(1,"Town or City is required"),e.qZA())}function M(o,i){1&o&&(e.TgZ(0,"p",33),e._uU(1,"Postcode is required"),e.qZA())}function k(o,i){1&o&&(e.TgZ(0,"p",33),e._uU(1,"Country is required"),e.qZA())}function Q(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"form",11),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().submit()}),e.TgZ(1,"div",12)(2,"div",13)(3,"label",14),e._uU(4,"Address Line 1: "),e.qZA(),e.TgZ(5,"div",15),e._UZ(6,"input",16),e.qZA(),e.YNc(7,H,2,0,"p",17),e.qZA(),e.TgZ(8,"div",18)(9,"label",19),e._uU(10,"Address Line 2: "),e.qZA(),e.TgZ(11,"div",15),e._UZ(12,"input",20),e.qZA()(),e.TgZ(13,"div",18)(14,"label",21),e._uU(15,"Address Line 3: "),e.qZA(),e.TgZ(16,"div",15),e._UZ(17,"input",22),e.qZA()(),e.TgZ(18,"div",18)(19,"label",23),e._uU(20,"Town/city: "),e.qZA(),e.TgZ(21,"div",15),e._UZ(22,"input",24),e.qZA(),e.YNc(23,L,2,0,"p",17),e.qZA(),e.TgZ(24,"div",18)(25,"label",25),e._uU(26,"County: "),e.qZA(),e.TgZ(27,"div",15),e._UZ(28,"input",26),e.qZA()(),e.TgZ(29,"div",13)(30,"label",27),e._uU(31,"Postcode: "),e.qZA(),e.TgZ(32,"div",15),e._UZ(33,"input",28),e.qZA(),e.YNc(34,M,2,0,"p",17),e.qZA(),e.TgZ(35,"div",29)(36,"label",30),e._uU(37,"Country: "),e.qZA(),e.TgZ(38,"div",15),e._UZ(39,"input",31),e.qZA(),e.YNc(40,k,2,0,"p",17),e.qZA()(),e.TgZ(41,"button",32),e._uU(42,"Next"),e.qZA()()}if(2&o){const t=e.oxw();e.Q6J("formGroup",t.addressForm),e.xp6(5),e.Q6J("className",t.addressForm.controls.addressLine1.invalid&&t.addressForm.controls.addressLine1.touched?"has-error input input-fullWidth":"input input-fullWidth"),e.xp6(2),e.Q6J("ngIf",t.addressForm.controls.addressLine1.invalid&&t.addressForm.controls.addressLine1.touched),e.xp6(4),e.Q6J("className",t.addressForm.controls.addressLine2.invalid&&t.addressForm.controls.addressLine2.touched?"has-error input input-fullWidth":"input input-fullWidth"),e.xp6(5),e.Q6J("className",t.addressForm.controls.addressLine3.invalid&&t.addressForm.controls.addressLine3.touched?"has-error input input-fullWidth":"input input-fullWidth"),e.xp6(5),e.Q6J("className",t.addressForm.controls.town.invalid&&t.addressForm.controls.town.touched?"has-error input input-fullWidth":"input input-fullWidth"),e.xp6(2),e.Q6J("ngIf",t.addressForm.controls.town.invalid&&t.addressForm.controls.town.touched),e.xp6(4),e.Q6J("className",t.addressForm.controls.county.invalid&&t.addressForm.controls.county.touched?"has-error input input-fullWidth":"input input-fullWidth"),e.xp6(5),e.Q6J("className",t.addressForm.controls.postCode.invalid&&t.addressForm.controls.postCode.touched?"has-error input input-fullWidth":"input input-fullWidth"),e.xp6(2),e.Q6J("ngIf",t.addressForm.controls.postCode.invalid&&t.addressForm.controls.postCode.touched),e.xp6(4),e.Q6J("className",t.addressForm.controls.country.invalid&&t.addressForm.controls.country.touched?"has-error input input-fullWidth":"input input-fullWidth"),e.xp6(2),e.Q6J("ngIf",t.addressForm.controls.country.invalid&&t.addressForm.controls.country.touched),e.xp6(1),e.Q6J("disabled",0==t.addressForm.valid)}}let Y=(()=>{class o{constructor(t){this.address=t,this.addressForm=new r.cw({addressLine1:new r.NI("",r.kI.required),addressLine2:new r.NI(""),addressLine3:new r.NI(""),town:new r.NI("",r.kI.required),county:new r.NI(""),postCode:new r.NI("",[r.kI.required,r.kI.minLength(6),r.kI.maxLength(9)]),country:new r.NI("United Kingdom")}),this.onFormComplete=new e.vpe,this.step=1,this.lookupDone=!1,this.lookupSuggestions=[]}ngOnInit(){var t,n,s,d,a,u,l;this.setAddress&&(null===(t=this.addressForm.get("addressLine1"))||void 0===t||t.setValue(this.setAddress.addressLine1),null===(n=this.addressForm.get("addressLine2"))||void 0===n||n.setValue(this.setAddress.addressLine2),null===(s=this.addressForm.get("addressLine3"))||void 0===s||s.setValue(this.setAddress.addressLine3),null===(d=this.addressForm.get("town"))||void 0===d||d.setValue(this.setAddress.town),null===(a=this.addressForm.get("county"))||void 0===a||a.setValue(this.setAddress.county),null===(u=this.addressForm.get("postCode"))||void 0===u||u.setValue(this.setAddress.postCode),null===(l=this.addressForm.get("county"))||void 0===l||l.setValue(this.setAddress.country),this.step=2)}handleAddressLookup(){this.lookupSearch.length<5||this.address.lookup(this.lookupSearch).subscribe(t=>{this.lookupSuggestions=t})}handleLookupSelect(t){this.address.getAddress(t).subscribe(n=>{var s,d,a,u,l,m,_;console.log(n),null===(s=this.addressForm.get("addressLine1"))||void 0===s||s.setValue(n.addressLine1),null===(d=this.addressForm.get("addressLine3"))||void 0===d||d.setValue(n.addressLine2),null===(a=this.addressForm.get("addressLine3"))||void 0===a||a.setValue(n.addressLine3),null===(u=this.addressForm.get("town"))||void 0===u||u.setValue(n.town),null===(l=this.addressForm.get("county"))||void 0===l||l.setValue(n.county),null===(m=this.addressForm.get("postCode"))||void 0===m||m.setValue(n.postCode),null===(_=this.addressForm.get("country"))||void 0===_||_.setValue(n.country),this.step=this.step+1})}submit(){var t,n,s,d,a,u,l;if(0==this.addressForm.valid)return void alert("Please check the details you have entered. More or more field are invalid.");let m={addressLine1:null===(t=this.addressForm.get("addressLine1"))||void 0===t?void 0:t.value,addressLine2:null===(n=this.addressForm.get("addressLine2"))||void 0===n?void 0:n.value,addressLine3:null===(s=this.addressForm.get("addressLine3"))||void 0===s?void 0:s.value,town:null===(d=this.addressForm.get("town"))||void 0===d?void 0:d.value,county:null===(a=this.addressForm.get("county"))||void 0===a?void 0:a.value,postCode:null===(u=this.addressForm.get("postCode"))||void 0===u?void 0:u.value,country:null===(l=this.addressForm.get("country"))||void 0===l?void 0:l.value,id:""};this.onFormComplete.emit(m)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(J))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-address-form"]],inputs:{personId:"personId",setAddress:"setAddress"},outputs:{onFormComplete:"onFormComplete"},decls:4,vars:2,consts:[[1,"text-big"],["class","",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,""],["for","search"],[1,"input","input-fullWidth"],["id","search","type","text",3,"ngModel","ngModelChange","keyup"],[1,"button","button--small",3,"click"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"button",3,"click"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-12","col-lg-4"],["for","addressLine1"],[3,"className"],["id","addressLine1","type","text","formControlName","addressLine1"],["class","text-error text-small",4,"ngIf"],[1,"col-12","col-md-6","col-lg-4"],["for","addressLine2"],["id","addressLine2","type","text","formControlName","addressLine2"],["for","addressLine4"],["id","addressLine3","type","text","formControlName","addressLine3"],["for","town"],["id","town","type","text","formControlName","town"],["for","county"],["id","county","type","text","formControlName","county"],["for","postcode"],["id","postcode","type","text","formControlName","postCode"],[1,"col-12","col-lg-12"],["for","country"],["id","country","type","text","formControlName","country"],["type","submit",1,"button",3,"disabled"],[1,"text-error","text-small"]],template:function(t,n){1&t&&(e.TgZ(0,"h2",0),e._uU(1,"Your Address"),e.qZA(),e.YNc(2,I,8,2,"div",1),e.YNc(3,Q,43,13,"form",2)),2&t&&(e.xp6(2),e.Q6J("ngIf",1===n.step),e.xp6(1),e.Q6J("ngIf",2===n.step))},directives:[c.O5,r.Fj,r.JJ,r.On,c.sg,r._Y,r.JL,r.sg,r.u],styles:[""]}),o})();var D=p(5797),P=p(6635),W=p(819);function O(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"app-tarrifs-list",4),e.NdJ("onTarrifSelect",function(s){return e.CHM(t),e.oxw().SetTarrif(s)}),e.qZA()}}function V(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"app-persondetails-form",9),e.NdJ("onFormCompleted",function(s){return e.CHM(t),e.oxw(2).setPersonalDetails(s)}),e.qZA(),e.TgZ(2,"p"),e._uU(3," If this is a gift membership for someone else, please e-mail membership.secretary@gwsr.com with a contact telephone number and full details of the occasion, urgency, etc. after you have completed the sign-up. "),e.qZA()()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("formData",t.personBasicDetails)}}function B(o,i){if(1&o&&(e.TgZ(0,"li"),e._UZ(1,"i",14),e._uU(2),e.qZA()),2&o){const t=i.$implicit;e.xp6(2),e.lnq(" ",t.title," ",t.firstName," ",t.lastName," ")}}function E(o,i){if(1&o&&(e.TgZ(0,"div")(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"ul"),e.YNc(4,B,3,3,"li",13),e.qZA()()),2&o){const t=e.oxw(3);e.xp6(2),e.AsE("Added ",t.additionalSeatHolders.length," out of ",t.getTarrifSeats()-1," available"),e.xp6(2),e.Q6J("ngForOf",t.additionalSeatHolders)}}function j(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",15)(1,"app-persondetails-form",16),e.NdJ("onFormCompleted",function(s){return e.CHM(t),e.oxw(3).addAdditionalSeat(s)}),e.qZA()()}}function G(o,i){1&o&&(e.TgZ(0,"div",17)(1,"p"),e._uU(2,"Thank you. You have added the maximum number of joint holders. "),e.qZA()())}function R(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"h2",6),e._uU(2,"Membership joint-holders"),e.qZA(),e._UZ(3,"hr"),e.TgZ(4,"p"),e._uU(5),e.qZA(),e.TgZ(6,"p"),e._uU(7,"If your joint holder doesn't have their own email address, please re-enter your email address. "),e.qZA(),e.YNc(8,E,5,3,"div",3),e.YNc(9,j,2,0,"div",10),e.YNc(10,G,3,0,"div",11),e.TgZ(11,"p"),e._uU(12,"When you have finished adding joint holders, click next."),e.qZA(),e.TgZ(13,"button",12),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return s.step=s.step+1}),e._uU(14,"Next"),e.qZA()()}if(2&o){const t=e.oxw(2);e.xp6(5),e.hij(" You can add an additional ",t.getTarrifSeats()-1," number of people your selected membership type. Please tell us about the other individuals you want to attach to this membership. Generally speaking, the trust will not contact joint-holders unless we cannot get in touch with you. "),e.xp6(3),e.Q6J("ngIf",t.additionalSeatHolders.length>0),e.xp6(1),e.Q6J("ngIf",t.additionalSeatHolders.length<t.getTarrifSeats()-1),e.xp6(1),e.Q6J("ngIf",t.additionalSeatHolders.length>=t.selectedTarrifSeats-1)}}function z(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",18)(1,"app-address-form",19),e.NdJ("onFormComplete",function(s){return e.CHM(t),e.oxw(2).setAddress(s)}),e.qZA()()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("setAddress",t.address)}}function X(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"section",5)(1,"h1",6),e._uU(2,"Your Details"),e.qZA(),e._UZ(3,"hr"),e.TgZ(4,"p")(5,"strong"),e._uU(6,"Selected Membership:"),e.qZA(),e._uU(7),e.TgZ(8,"button",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().resetTarrif()}),e._uU(9," Change "),e.qZA()(),e.YNc(10,V,4,1,"div",3),e.YNc(11,R,15,4,"div",3),e.YNc(12,z,2,1,"div",8),e.qZA()}if(2&o){const t=e.oxw();e.xp6(7),e.hij(" ",t.getSelectedTarrifDescription()," "),e.xp6(3),e.Q6J("ngIf",2===t.step),e.xp6(1),e.Q6J("ngIf",3===t.step),e.xp6(1),e.Q6J("ngIf",4===t.step)}}function $(o,i){if(1&o&&(e.TgZ(0,"div")(1,"p")(2,"strong"),e._uU(3,"Name: "),e.qZA(),e._uU(4),e._UZ(5,"br"),e.TgZ(6,"strong"),e._uU(7,"Email: "),e.qZA(),e._uU(8),e._UZ(9,"br"),e.TgZ(10,"strong"),e._uU(11,"Phone Number: "),e.qZA(),e._uU(12),e._UZ(13,"br"),e.TgZ(14,"strong"),e._uU(15,"Mobile Number: "),e.qZA(),e._uU(16),e.qZA()()),2&o){const t=i.$implicit;e.xp6(4),e.HOy("",t.title,". ",t.firstName," ",t.middleName," ",t.lastName,""),e.xp6(4),e.Oqu(t.email),e.xp6(4),e.Oqu(t.landLineNo),e.xp6(4),e.hij("",t.mobileNumber," ")}}function K(o,i){if(1&o&&(e.TgZ(0,"div")(1,"h2",22),e._uU(2,"Additonal Holders"),e.qZA(),e.YNc(3,$,17,7,"div",13),e.qZA()),2&o){const t=e.oxw(2);e.xp6(3),e.Q6J("ngForOf",t.additionalSeatHolders)}}function ee(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"section",5)(1,"p")(2,"strong"),e._uU(3,"Please take a moment to double check the details entered. "),e.qZA()(),e.TgZ(4,"div",20)(5,"div",21)(6,"h2",22),e._uU(7,"Personal Details"),e.qZA(),e.TgZ(8,"p")(9,"strong"),e._uU(10,"Name: "),e.qZA(),e._uU(11),e._UZ(12,"br"),e.TgZ(13,"strong"),e._uU(14,"Email: "),e.qZA(),e._uU(15),e._UZ(16,"br"),e.TgZ(17,"strong"),e._uU(18,"Phone Number: "),e.qZA(),e._uU(19),e._UZ(20,"br"),e.TgZ(21,"strong"),e._uU(22,"Mobile Number: "),e.qZA(),e._uU(23),e.qZA(),e.YNc(24,K,4,1,"div",3),e.qZA(),e.TgZ(25,"div",21)(26,"h2",22),e._uU(27,"Address"),e.qZA(),e.TgZ(28,"p")(29,"strong"),e._uU(30,"Line 1: "),e.qZA(),e._uU(31),e._UZ(32,"br"),e.TgZ(33,"strong"),e._uU(34,"Line 2: "),e.qZA(),e._uU(35),e._UZ(36,"br"),e.TgZ(37,"strong"),e._uU(38,"Line 3: "),e.qZA(),e._uU(39),e._UZ(40,"br"),e.TgZ(41,"strong"),e._uU(42,"Town/City: "),e.qZA(),e._uU(43),e._UZ(44,"br"),e.TgZ(45,"strong"),e._uU(46,"County: "),e.qZA(),e._uU(47),e._UZ(48,"br"),e.TgZ(49,"strong"),e._uU(50,"Postcode: "),e.qZA(),e._uU(51),e.qZA()()(),e.TgZ(52,"button",23),e.NdJ("click",function(){return e.CHM(t),e.oxw().step=2}),e._uU(53,"No, somethings wrong"),e.qZA(),e.TgZ(54,"button",12),e.NdJ("click",function(){return e.CHM(t),e.oxw().step=6}),e._uU(55,"Yes, thats correct"),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(11),e.HOy("",t.personBasicDetails.title,". ",t.personBasicDetails.firstName," ",t.personBasicDetails.middleName," ",t.personBasicDetails.lastName,""),e.xp6(4),e.Oqu(t.personBasicDetails.email),e.xp6(4),e.Oqu(t.personBasicDetails.landLineNo),e.xp6(4),e.hij("",t.personBasicDetails.mobileNumber," "),e.xp6(1),e.Q6J("ngIf",t.additionalSeatHolders.length>0),e.xp6(7),e.Oqu(t.address.addressLine1),e.xp6(4),e.Oqu(t.address.addressLine2),e.xp6(4),e.Oqu(t.address.addressLine3),e.xp6(4),e.Oqu(t.address.town),e.xp6(4),e.Oqu(t.address.county),e.xp6(4),e.hij("",t.address.postCode," ")}}function te(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"app-payment-methods-table",27),e.NdJ("onload",function(){return e.CHM(t),e.oxw(2).toTop()})("onMethodSelected",function(s){return e.CHM(t),e.oxw(2).selectedPaymentMethod=s}),e.qZA()}}function oe(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"app-membership-declarations",28),e.NdJ("onload",function(){return e.CHM(t),e.oxw(2).toTop()})("declarationsChange",function(s){return e.CHM(t),e.oxw(2).declarations=s}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("declarations",t.declarations)("selectedTarrifBaseRate",t.selectedTarrifBaseRate)}}function ne(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).createMembership()}),e._uU(1," Pay Now "),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("disabled",!t.declarations.termsAccepted)}}function se(o,i){if(1&o&&(e.TgZ(0,"section",5),e.YNc(1,te,1,0,"app-payment-methods-table",24),e.YNc(2,oe,1,2,"app-membership-declarations",25),e.YNc(3,ne,2,1,"button",26),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",0===t.selectedPaymentMethod),e.xp6(1),e.Q6J("ngIf",0!==t.selectedPaymentMethod),e.xp6(1),e.Q6J("ngIf",0!==t.selectedPaymentMethod)}}function ie(o,i){1&o&&(e.TgZ(0,"section")(1,"div",30)(2,"p"),e._uU(3,"Success. Your membership has been created."),e.qZA()()())}function re(o,i){1&o&&e._UZ(0,"app-please-waitpopup")}let de=(()=>{class o{constructor(t,n){this.tarrifsService=t,this.joinService=n,this.step=1,this.selectedCategory=0,this.selectedTarrif=0,this.selectedTarrifDescription="",this.selectedPaymentMethod=0,this.declarations={termsAccepted:!0,additonalDonation:0,additonalDonationRepeatOnRenewal:!1,giftAidDecl:"",cornishman:0},this.additionalSeatHolders=[],this.loading=!0,this.tarrifs=[]}getSelectedTarrifDescription(){return this.tarrifsService.selectedCategory.name+" - "+this.tarrifsService.selectedTarrif.description}ngOnInit(){this.tarrifsService.getTarrifs().subscribe({next:t=>{this.tarrifs=t,this.loading=!1}})}SetTarrif(t){this.step=2,this.toTop()}addAdditionalSeat(t){this.additionalSeatHolders.push(t)}resetTarrif(){this.selectedTarrifDescription="",this.selectedTarrif=0,this.step=1,this.toTop()}getTarrifSeats(){return this.tarrifsService.getSelectedTarrifSeats()}setPersonalDetails(t){this.toTop(),this.personBasicDetails=t,this.step=this.getTarrifSeats()>1?3:4}setAddress(t){this.address=t,this.address.id="00000000-0000-0000-0000-000000000000",this.step=5,this.toTop()}createMembership(){var t=this;return function T(o){return function(){var i=this,t=arguments;return new Promise(function(n,s){var d=o.apply(i,t);function a(l){g(d,n,s,a,u,"next",l)}function u(l){g(d,n,s,a,u,"throw",l)}a(void 0)})}}(function*(){t.loading=!0,t.joinService.createMembership({membership:{selectedPaymentMethod:t.selectedPaymentMethod,personId:t.personGuid,additionalDonation:t.declarations.additonalDonation,repeatDonationOnRenewal:t.declarations.additonalDonationRepeatOnRenewal,jointHolders:t.additionalSeatHolders,membershipTarrifId:t.tarrifsService.selectedTarrif.id,giftAidDeclaration:"true"===t.declarations.giftAidDecl,cornishman:t.cornishman},person:t.personBasicDetails,address:t.address}).subscribe({next:s=>{t.loading=!1,t.step=7,window.location.href=s.paymentUrl},error:s=>{alert("We are sorry, but we couldn't create your membership at this time. Please try again later."),t.loading=!1}})})()}toTop(){window.scroll(0,0)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b.B),e.Y36(A))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-join-home"]],decls:7,vars:6,consts:[[1,"mb-big"],[3,"onTarrifSelect",4,"ngIf"],["class","p-big",4,"ngIf"],[4,"ngIf"],[3,"onTarrifSelect"],[1,"p-big"],[1,"text-huge"],[1,"button","button--small",3,"click"],["class","p-medium",4,"ngIf"],[3,"formData","onFormCompleted"],["class","border-top border-bottom p-medium",4,"ngIf"],["class","border-top border-bottom",4,"ngIf"],[1,"button",3,"click"],[4,"ngFor","ngForOf"],[1,"fa-solid","fa-check"],[1,"border-top","border-bottom","p-medium"],[3,"onFormCompleted"],[1,"border-top","border-bottom"],[1,"p-medium"],[3,"setAddress","onFormComplete"],[1,"row"],[1,"col","col-md-6"],[1,"text-big"],[1,"button","button--red","button-small",3,"click"],[3,"onload","onMethodSelected",4,"ngIf"],[3,"declarations","selectedTarrifBaseRate","onload","declarationsChange",4,"ngIf"],["class","button button-large",3,"disabled","click",4,"ngIf"],[3,"onload","onMethodSelected"],[3,"declarations","selectedTarrifBaseRate","onload","declarationsChange"],[1,"button","button-large",3,"disabled","click"],[1,"notification","notification--success"]],template:function(t,n){1&t&&(e.TgZ(0,"section",0),e.YNc(1,O,1,0,"app-tarrifs-list",1),e.qZA(),e.YNc(2,X,13,4,"section",2),e.YNc(3,ee,56,14,"section",2),e.YNc(4,se,4,3,"section",2),e.YNc(5,ie,4,0,"section",3),e.YNc(6,re,1,0,"app-please-waitpopup",3)),2&t&&(e.xp6(1),e.Q6J("ngIf",1===n.step),e.xp6(1),e.Q6J("ngIf",n.step>=2),e.xp6(1),e.Q6J("ngIf",5===n.step),e.xp6(1),e.Q6J("ngIf",6===n.step),e.xp6(1),e.Q6J("ngIf",7===n.step),e.xp6(1),e.Q6J("ngIf",n.loading))},directives:[c.O5,x.z,q,c.sg,Y,D.v,P._,W.J],styles:[""]}),o})();var Z=p(459);const ae=[{path:"",component:de},{path:"success",component:(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-confirm-success"]],decls:2,vars:0,template:function(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1,"confirm-success works!"),e.qZA())},styles:[""]}),o})()}];let le=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[Z.Bz.forChild(ae)],Z.Bz]}),o})();var ue=p(4466);let pe=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[c.ez,le,r.UX,r.u5,ue.m]]}),o})()}}]);